# 시나리오 1: 종목 추천 및 분석

## 사용자 여정 (User Journey)

### 1단계: 초기 종목 추천 요청
**사용자 액션:** "요즘 괜찮은 종목이나 분야 추천해줘"

**챗봇 응답:**
- 현재 코스피/코스닥 시장 상황 간략 설명
- 한국 주요 종목 추천 리스트 (5-8개)
- 각 종목별 간단한 추천 이유 (섹터 동향, 실적 전망)
- 업종별 카테고리 분류 (IT, 바이오, 화학, 금융 등)

**UI 표시:**
```
📈 현재 추천 종목 (KRX 상장 기준)
┌─────────────────────────────────────┐
│ 🔥 IT/반도체 섹터                    │
│ • 삼성전자 (005930) - 메모리 회복세   │
│ • SK하이닉스 (000660) - AI 수혜주     │
│ • 네이버 (035420) - 클라우드 성장     │
│                                     │
│ 🏭 2차전지/ESG                      │
│ • LG에너지솔루션 (373220)            │
│ • 포스코홀딩스 (005490)              │
│                                     │
│ 💊 바이오/헬스케어                   │
│ • 셀트리온 (068270)                 │
│ • 삼성바이오로직스 (207940)          │
└─────────────────────────────────────┘
```

### 2단계: 특정 종목 분석 요청
**사용자 액션:** "삼성전자 분석해줘"

**시스템 처리:**
1. KIS API를 통한 실시간 주가 데이터 수집
2. OpenDART에서 재무제표 데이터 로드
3. KIS API 기반 기술적 지표 계산 (RSI, MACD 등)
4. 한국 시장 특화 밸류에이션 지표 산출 (동종업계 비교)
5. AI 분석 엔진 실행 (한국 경제 지표 반영)

## 캔버스 레이아웃 구성

### 좌측: 챗봇 영역 (30% 너비)
- 대화 히스토리
- 추가 질문 입력창
- 빠른 액션 버튼들
  - "다른 종목 추천"
  - "비교 분석 추가"
  - "포트폴리오에 추가"

### 우측: 분석 캔버스 (70% 너비)

#### 상단 헤더
```
삼성전자 (005930) | 현재가: 75,000원 (+1,200, +1.63%) 
코스피: 2,650.5 (+15.2, +0.58%) | 업데이트: 2025.07.29 15:30 (KIS)
```

#### 메인 콘텐츠 영역 (그리드 레이아웃)

**1. 주가 차트 영역 (상단 좌측, 60% 너비)**
- 캔들스틱 차트 (기본 3개월)
- 이동평균선 (5일, 20일, 60일)
- 거래량 차트 (하단)
- 기간 선택 버튼 (1M, 3M, 6M, 1Y, 3Y)
- 기술적 지표 추가 옵션

**2. 핵심 지표 카드 (상단 우측, 40% 너비)**
```
┌─────────────────┐ ┌─────────────────┐
│ PER: 12.5배     │ │ PBR: 1.2배      │
│ 코스피평균: 15.2배│ │ 코스피평균: 1.8배│
│ ✅ 저평가       │ │ ✅ 저평가       │
└─────────────────┘ └─────────────────┘

┌─────────────────┐ ┌─────────────────┐
│ ROE: 9.8%       │ │ 배당수익률: 2.1% │
│ 동종업계평균:11.2%│ │ 배당성향: 25%    │
│ ⚠️ 평균 이하    │ │ 📈 안정적       │
└─────────────────┘ └─────────────────┘

┌─────────────────┐ ┌─────────────────┐
│ 외국인 보유율    │ │ 기관 순매수      │
│ 51.2% (+0.5%p)  │ │ +1,250억원 (5일) │
│ 📈 지속 증가    │ │ 💪 매수 우위     │
└─────────────────┘ └─────────────────┘
```

**3. 재무제표 요약 (중간 좌측)**
- 탭 구조: 손익계산서 | 재무상태표 | 현금흐름표
- 최근 4분기 데이터
- 전년동기 대비 증감률
- 핵심 항목 하이라이트

**4. AI 분석 결과 (중간 우측)**
```
🤖 AI 종합 분석 점수: 75/100

강점 💪
• 메모리 업황 회복 전망
• AI 서버용 HBM 수요 증가
• 견고한 현금 창출 능력
• 외국인 지속 매수 (KIS 데이터 기반)

주의점 ⚠️
• 중국 스마트폰 시장 부진
• 환율 변동 리스크 (달러강세)
• 한국 금리 인상 부담

투자 의견: 중립 (Hold)
목표가: 82,000원 (+9.3%)
기준: 한국 증권사 평균 컨센서스
```

**5. 뉴스 & 이슈 (하단)**
- 연합뉴스, 한국경제 등 주요 언론사 뉴스 3-5개
- 한국 증권사 애널리스트 리포트 요약
- 금감원 공시 정보 (전자공시시스템 연동)
- 한국거래소 공지사항

## 상호작용 기능

### 차트 영역
- **확대/축소:** 마우스 휠, 핀치 제스처
- **기간 변경:** 버튼 클릭 또는 드래그
- **지표 추가:** 우클릭 메뉴에서 RSI, MACD 등 선택
- **비교 차트:** 다른 종목과 오버레이

### 데이터 테이블
- **정렬:** 컬럼 헤더 클릭
- **필터링:** 기간, 항목별 필터
- **내보내기:** CSV, PDF 다운로드

### AI 분석
- **상세 보기:** 클릭 시 분석 근거 펼치기
- **질문하기:** "왜 목표가가 82,000원인가요?" 등
- **업데이트:** 최신 데이터로 재분석 요청

## 기술적 요구사항

### KIS API 활용 방안
- **실시간 시세**: KIS OpenAPI+ 호가/체결 데이터
- **차트 데이터**: 일봉/분봉 데이터 (최대 100일)
- **기본 정보**: 종목 상세, 재무 요약 지표
- **외국인/기관 동향**: 투자자별 매매 현황
- **섹터 분석**: 업종별 시가총액, PER 등

### 보완 데이터 소스
- **상세 재무제표**: OpenDART API (무료)
- **공시 정보**: 전자공시시스템
- **뉴스**: 네이버 뉴스 API, 한경 뉴스
- **경제지표**: 한국은행 경제통계시스템

### API 사용량 최적화
- **캐싱 전략**: Redis 활용 (1분 단위 갱신)
- **배치 처리**: 장 마감 후 대량 데이터 업데이트
- **실시간 제한**: 핵심 지표만 실시간, 나머지는 지연
- **샌드박스**: KIS 모의투자 환경에서 테스트

### 성능 최적화
- **차트 렌더링:** Canvas 또는 WebGL 기반
- **데이터 캐싱:** Redis 또는 로컬 스토리지
- **지연 로딩:** 탭 전환 시 필요한 데이터만 로드

### 반응형 디자인
- **모바일:** 캔버스를 탭 구조로 변경
- **태블릿:** 레이아웃 비율 조정
- **데스크톱:** 듀얼 모니터 지원

## 추가 기능 아이디어

### 개인화
- **관심종목:** 즐겨찾기 추가
- **알림설정:** 목표가 도달, 이슈 발생 시 알림
- **투자성향:** 위험선호도에 따른 맞춤 분석

### 소셜 기능
- **공유하기:** 분석 결과 SNS 공유
- **커뮤니티:** 다른 투자자 의견 확인
- **전문가 코멘트:** 애널리스트 의견 구독

### 확장 기능
- **포트폴리오 시뮬레이션:** 가상 매수/매도
- **백테스팅:** 과거 데이터로 전략 검증
- **리밸런싱:** 자동 포트폴리오 조정 제안